<!DOCTYPE html>
<html lang="pt">
<head>

  <!-- Meta tags -->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, user-scalable=no">
  <meta name="author" content="mobLee">
  <meta name="theme-color" content="#ed1164">

  <!-- CSS -->
  <link href="css/style.css" rel="stylesheet">

  <!-- Title -->
  <title>Desafio 1</title>

  <script>  var pokeArr = [ ]; </script>
  <script>
    function aPokemon(sprite, name, height, weight, type){
      return pArray = [sprite, name, height, weight, type];
      // this.sprite = sprite;
      // this.name = name;
      // this.height = height;
      // this.weight = weight;
      // this.type1 = type1;
      // this.type2 = type2;
    }
  </script>

  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src ="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" language="javascript">
    $(document).ready(function() {
      $.getJSON("poke_results.json", function(pokeResults) {
          for(i = 1; i < 10; i++){
            var pokeS = pokeResults[i].n_sprite;
            console.log(pokeS)
            var pokeName = pokeResults[i].n_name;
            pokeName = pokeName.toLowerCase().replace(/\b[a-z]/g, function(letter) {
              return letter.toUpperCase();
            }) 
            var pokeH = pokeResults[i].n_height; 
            var pokeW = pokeResults[i].n_weight;
            var pokeT = pokeResults[i].n_type;
            pokeT = pokeT.toLowerCase().replace(/\b[a-z]/g, function(letter) {
              return letter.toUpperCase();
            }) 
            var nthPokemon = aPokemon(
              pokeS, pokeName, pokeH, pokeW, pokeT
            )
            pokeArr[i-1] = nthPokemon;
            console.log(pokeArr)
          }
          console.log(pokeArr);
      $(document).ready(function() {
        $('#example').DataTable( {
            data: pokeArr,
            columns: [
                { title: "Sprite" },
                { title: "Nome" },
                { title: "Altura" },
                { title: "Peso" },
                { title: "Tipo" }
            ],
            "order": [[ 1, "desc" ]],
            columnDefs: [
              { targets: 0,
                render: function(data) {
                  return '<img src="'+data+'">'
                }
              },
              { targets: 2,
                type: "numeric",
                render: function(data, type, row) {
                  if (type == "display"){
                    return data+'(p√©s)'
                  }
                  return data;
                }
              },
              { targets: 3,
                type: "numeric",
                render: function(data, type, row) {
                  if (type == "display"){
                    return data+'(libras)'
                  }
                  return data;
                }
              }   
            ]
        } );
      } );
        }
      )      
    })
  </script>
</head>
<body>
  <table id="example" class="display" width="100%"></table>
</body>

</html>